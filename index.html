<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>PC Sleep</title>

    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./images/favicon.ico" />
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
    <script src="./Backend/dist/easytimer.min.js"></script>
</head>
<body>
    <div class="container">  
        <div class="main"> <br>
            <div class="title">
                <h1> PC Sleep </h1>
            </div>  

            <h3>Insira o tempo para o computador desligar abaixo</h3> <br/>

            <div class="timeFormContainer">
                <input id = "hoursForm" class = "timeForm" value="01" placeholder="" type="number" min="0" max="99"></input>  <br/>
                <input id = "minutesForm" class = "timeForm" value="30" placeholder="" type="number" min="0" max="59"></input>  <br/>
                <input id = "secondsForm" class = "timeForm" value="00" placeholder="" type="number" min="0" max="59"></input>  <br/>
                <br/>
            </div>

            <br/>

            <button id = "shutdownButton"> Agendar desligamento </button> <br/> 

            <button id = "cancelShutdownButton"> Cancelar desligamento </button>

            <div> <br/> 
                <p id = "shutdownInformation"></p>
            </div>

        </div>
    </div>

</body>



<script>

        async function shutdown(){

            let hour = document.getElementById('hoursForm').value;
            let min = document.getElementById('minutesForm').value;
            let sec = document.getElementById('secondsForm').value;

            const timeToShutdown = hour * 3600 + min * 60 + sec * 1;

            if(hour == undefined || hour.length == 0 || min == undefined || min.length == 0 || sec == undefined || sec.length == 0){
                alert('Informe o tempo para desligar')
            } else {

               await axios({
                        method: 'get',
                        url: `http://localhost:8080/shutdown/${timeToShutdown}`,
                        })
                        .then(function (response) {
                            
                            const shutdownInformation = document.getElementById('shutdownInformation');


                            
                                // for(var i = hour; i >= 0; i--){
                                //     for(var j = min; j >= 0; j--){
                                //         for(var k = sec; k >= 0; k--){    
                                //             shutdownInformation.innerHTML = `SerÃ¡ desligado em ${hour} hora(s), ${min} minuto(s) e ${sec} segundo(s)`;
                                //         }
                                //         sec = 59;
                                //     }
                                //     min = 59;
                                // }
    

                        }).catch(err => {
                            console.log(err);
                        });
            }
        };

       

         function shutdownCancel(){

             axios({
                method: 'get',
                url: `http://localhost:8080/cancel`,
                })
                .then(function (response) {
   
                    const shutdownInformation = document.getElementById('shutdownInformation');
                    shutdownInformation.innerHTML = '';

                }).catch(err => {
                    console.log(err);
                });
            };


            const shutdownButton = document.getElementById('shutdownButton').addEventListener('click', shutdown);
            const cancelShutdownButton = document.getElementById('cancelShutdownButton').addEventListener('click', shutdownCancel);
           

       


         
</script>

</html>