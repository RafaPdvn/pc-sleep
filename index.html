<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>PC Sleep</title>

    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link rel="shortcut icon" href="./images/favicon.ico" />
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">  
        <div class="main"> <br>
            <div class="title">
                <h1> PC Sleep </h1>
            </div>  <br/>

            

            <input id = "secondsToShutdown" placeholder="Digite em quantos segundos quer desligar" type="number" min="0" step="1" style="width: 300px; text-align: center;"></input>  <br/>
            <br/>

            <button id = "shutdownButton"> Agendar desligamento </button> <br/> 

            <button id = "cancelShutdownButton"> Cancelar desligamento </button>

            <div> <br/> 
                <p id = "shutdownInformation"></p>
            </div>

        </div>
    </div>

</body>



<script>
  

        async function shutdown(){

            const secondsToShutdown = document.getElementById('secondsToShutdown').value;

            if(secondsToShutdown == undefined || secondsToShutdown.length == 0 || secondsToShutdown == undefined){
                alert('Informe os segundos para agendar o desligamento')
            } else {

               await axios({
                        method: 'get',
                        url: `http://localhost:8080/shutdown/${secondsToShutdown}`,
                        })
                        .then(function (response) {

                            const shutdownInformation = document.getElementById('shutdownInformation');
                            shutdownInformation.innerHTML = `O computador serÃ¡ desligado em ${secondsToShutdown} segundo(s)`;

                        }).catch(err => {
                            console.log(err);
                        });
            }
        };

       

         function shutdownCancel(){

             axios({
                method: 'get',
                url: `http://localhost:8080/cancel`,
                })
                .then(function (response) {
   
                    const shutdownInformation = document.getElementById('shutdownInformation');
                    shutdownInformation.innerHTML = '';

                }).catch(err => {
                    console.log(err);
                });
            };


            const shutdownButton = document.getElementById('shutdownButton').addEventListener('click', shutdown);
            const cancelShutdownButton = document.getElementById('cancelShutdownButton').addEventListener('click', shutdownCancel);
           

       


         
</script>

</html>